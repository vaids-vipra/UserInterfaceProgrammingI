<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Login Form Design</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script type="text/javascript" src="jquery-3.3.1.min.js"></script>
    <script
      type="text/javascript"
      src="./customerPage/customerPage.js"
    ></script>
    <script type="text/javascript" src="Beverages.js"></script>
    <script type="text/javascript" src="DBLoaded.js"></script>
    <script type="text/javascript" src="loader.js"></script>
  </head>

  <body>
    <div class="login-page-container">
      <div class="loginbox">
        <img src="avatar.png" class="avatar" />
        <h1>Login Here</h1>
        <form action="javascript:validate();" method="post">
          <p>Username</p>
          <input
            type="text"
            name=""
            placeholder="Enter Username"
            name="uname"
            id="uname"
            required="true"
          />
          <p>Password</p>
          <input
            type="password"
            name=""
            placeholder="Enter Password"
            name="passwd"
            id="passwd"
            required="true"
          />
          <input type="submit" value="Login" />
          <a href="#">Lost your password?</a><br />
        </form>
      </div>
      <div class="footer-div">
        <!-- Just temp for test to see if it would work -->
        <p>Or continue as a guest by choosing table:</p>
        <form id="table-form" onsubmit="{tableChosen(event)}">
          <input type="text" id="table-number" name="table-number" />
          <input type="submit" value="continue" />
        </form>
      </div>
    </div>

    <script language="JavaScript">
      function validate() {
        var uName = document.getElementById("uname").value;
        var passwd = document.getElementById("passwd").value;
        var myData = DB.users;
        var userFound = false;

        for (var i = 0; i < myData.length; i++) {
          if (myData[i].username == uName && myData[i].password == passwd) {
            userFound = true;
          }
        }
        if (userFound) {
          localStorage.setItem("loggedUser", uName);
          document.location.href = "index.html";
          console.log(document.location.href);
        } else {
          alert("Login failed for user '" + uName + "'...try again later!");
        }
      }
      // Also just temp to try out. Obviously needs more stuff if to be implemented etc
      function tableChosen(e) {
        e.preventDefault();
        var table = document.getElementById("table-number").value;
        setTableForCustomer(table); // Calls a function in customerPAge.js
      }
    </script>
    <!---
The html-file is just for loading the javascript files. If you go to the console under the "Inspect" of the popup menu,
then you can enter javascript calls, to test the functions.

-->
  </body>
</html>
